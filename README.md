# Arch Chroot Utilities
A collection of scripts that make it simple to setup, enter, and delete an Arch Linux chroot. Requires an Arch Linux host system.

***These scripts have extremely destructive capabilities (e.g. `sudo rm -rf [path]`). Root permissions are required by both `mkarchroot` while creating the filesystem and `rm` when removing it. Be VERY attentive when running these scripts and read every prompt extremely carefully. Failing to do so can result in damage to the host system and loss of personal data. Use these scripts at your own risk.***

# Obtaining
You can find versioned releases as compressed archives on the [releases](https://gitlab.com/nickgirga/acu/-/releases) page. If you plan on using the main branch, I personally would recommend just using git to clone the repository: `git clone --recurse-submodules https://gitlab.com/nickgirga/acu.git arch-chroot-utilities`. Make note of the `--recurse-submodules` option. If you do not already have "depchecker" installed (you probably don't), you will need to go into the "[depchecker](https://gitlab.com/nickgirga/depchecker)" subdirectory (which will be empty unless you use the `--recurse-submodules` option) and intall it. This is covered in the [Dependencies](#dependencies) section).

# Dependencies
#### depchecker (Easy)
To quickly install dependencies on my most frequently used environments, I created a Python module called "depchecker". It is not intended to be a replacement for proper package management, but for quick scripts like these, it makes using them on brand new environments pretty easy without having to repackage the script for each and every environment with every incremental change. It is required to use these scripts out of the box. Once it is installed, it will work with any of my other scripts that utilize it. You will not need to install any other dependencies if you just let "depchecker" do the work for you. To install it, you will first want to grab [Python](https://www.python.org/downloads/). Then, just go into the "depchecker" subdirectory and run `pip install .`. That's it. If you chose to install "depchecker", you can proceed to the [Usage](#usage) section. You can also install everything manually if you wish to avoid "depchecker", but this requires editing the script. See the [Manual](####manual) section for more information.

#### Manual (Advanced)
To install dependencies manually, you must first install [Python](https://www.python.org/downloads/) (3.9+ should be fine), `arch-install-scripts`, `devtools`, and `util-linux`. Most environments come with `util-linux`. `devtools` depends on `arch-install-scripts`, so you should really only need to install Python (maybe) and `devtools` on most environments. However, if you do not have "depchecker" installed, even if you have other dependencies satisfied, Python will complain about mention of an unknown module. So we must remove the few lines that mention it. It is only used during the start of the scripts, so look towards the top of all of them for 2(+) lines `import depchecker.depchecker as depchecker` and `depchecker.check_dependencies(...)`. They will likely have comments near them saying `# Imports` and `# Check for script dependencies.`. There should not be any more use of "depchecker", but using your text editor's find functions to look for "depchecker" couldn't hurt. The scripts should now work without having to install "depchecker" if you really don't want it. Proceed to the [Usage](#usage) section.

# Usage
After [installing dependencies](#dependencies), all you have to do do get an Arch Linux chroot up and running is navigate to the repository's root directory and run `./create-chroot` (wait for it to complete) and run `./start-chroot` to enter it. If you need to destroy it, simply run `./delete-chroot`. The utilities that comes with `devtools` and `arch-install-scripts` will take care of many things such as networking, copying mirrorlists, etc. The Arch Chroot Utilities you find in this repository will take care of things such as mounting/unmounting, ensuring the user doesn't do anything too dangerous (like deleting the filesystem while it's mounted), and installing needed dependencies. It also just makes it much easier to type. This last point can be especially appreciated when creating and destroying the same container over and over again. To learn more about the options that the scripts have, you can use the `--help` option (e.g. `./create-chroot --help`). Some scripts have different options, so it's useful to take a look at all of them.

Note that these scripts were created for the convenience of developers for internal use and are not intended to be used in other contexts. Regardless of the context of your use, it would be wise to look over the scripts yourself before running them. They aren't complex at all because they utilize a few other chroot utilities from the `devtools` package.
